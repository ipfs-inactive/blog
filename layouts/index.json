{{ $length := (len .Data.Pages) -}}
{
    "posts" : [
        {{ range $index, $element := first 4 (sort (where (where .Data.Pages "Section" "post") "Kind" "page") "Params.date" "desc") -}}
        {
            "title" : {{ .Title | jsonify }},
            "date" : "{{ .Date.Format "02 January 2006" }}",
            "url" : "{{ .Permalink }}",
            "author" : "{{ .Params.author }}"
        }{{ if ne (add $index 1) $length }},{{ end }}
        {{ end -}}
    ]
}
